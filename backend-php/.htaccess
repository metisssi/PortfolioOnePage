RewriteEngine On

# --- API routes ---
RewriteRule ^api/auth/login$        api/auth.php [L,QSA]
RewriteRule ^api/content$           api/content.php [L,QSA]
RewriteRule ^api/gallery$           api/gallery.php [L,QSA]
RewriteRule ^api/gallery/(.+)$      api/gallery.php?id=$1 [L,QSA]
RewriteRule ^api/reviews$           api/reviews.php [L,QSA]
RewriteRule ^api/reviews/all$       api/reviews.php?action=all [L,QSA]
RewriteRule ^api/reviews/(.+)/approve$ api/reviews.php?id=$1&action=approve [L,QSA]
RewriteRule ^api/reviews/(.+)$      api/reviews.php?id=$1 [L,QSA]
RewriteRule ^api/health$            api/health.php [L,QSA]
RewriteRule ^api/install$           api/install.php [L,QSA]

# --- SPA fallback (frontend) ---
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(?!api/) index.html [L]